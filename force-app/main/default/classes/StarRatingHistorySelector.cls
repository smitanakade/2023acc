/**
 * @author      Kai-Fan Hsieh
 * @date        14-02-2023
 * @description Selector class to get data from STAR_Rating_History__c
 * @testClass   StarRatingHistorySelectorTest
 */
public with sharing class StarRatingHistorySelector {

    public static StarRatingHistorySelector singletonInstance {
        get {
            if (singletonInstance == null) {
                singletonInstance = new StarRatingHistorySelector();
            }
            return singletonInstance;
        }
        private set;
    }

    public List<STAR_Rating_History__c> getSRHListBySFServiceIds(Set<Id> sfServiceIds) {
        return [
            SELECT
                Id,
                Reporting_Period__r.Reporting_Period__c,
                Reporting_Period__r.Reporting_Period_Short__c,
                Provider_Portal_Status__c,
                SF_Service_Id__r.Name,
                SF_Service_Id__r.Integration_ID__c,
                Status__c,
                STAR_Rating_Calculation__c,
                Publish_Date__c,
                Go_Live_Date__c,
                STAR_Rating__c,
                Rating_Type__c,
                Rating_Calc_Date__c,
                Service_Account_Relationship__c,
                Rating_Exemption_Reason__c,
                Under_Review__c,
                Consumer_Experience_Rating__c,
                Quality_Indicator_Rating__c,
                Service_Compliance_Rating__c,
                SRH_Rating_Label__c,
                Care_Minutes_Description__c,
                CER_Rating_Description__c,
                Care_Minutes_Rating__c,
                Quality_Indicator_Description__c,
                Service_Compliance_Rating_Description__c,
                Care_Minutes_Id__r.Care_Minutes_Rating__c,
                Care_Minutes_Id__r.Rating_Type__c,
                Care_Minutes_Id__r.Rating_Exemption_Reason__c,
                Care_Minutes_Id__r.Rating_Calc_Date__c,
                Care_Minutes_Id__r.Under_Review__c,
                Care_Minutes_Id__r.Care_Minutes_Rating_Label__c,
                Care_Minutes_Id__r.Actual_Care_Minutes__c,
                Care_Minutes_Id__r.Total_Care_Minutes_Target__c,
                Care_Minutes_Id__r.Actual_Registered_Nursing_Minutes__c,
                Care_Minutes_Id__r.Registered_Nurse_Care_Minutes_Target__c,
                Consumer_Experience_Id__r.Iv_Commenced_Date__c,
                Consumer_Experience_Id__r.Consumer_Experience_Rating__c,
                Consumer_Experience_Id__r.Rating_Type__c,
                Consumer_Experience_Id__r.Rating_Calc_Date__c,
                Consumer_Experience_Id__r.Publication_Date__c,
                Consumer_Experience_Id__r.Rating_Exemption_Reason__c,
                Consumer_Experience_Id__r.Under_Review__c,
                Consumer_Experience_Id__r.Total_CER_Rating_Label__c,
                Consumer_Experience_Id__r.Respect_Always__c,
                Consumer_Experience_Id__r.Respect_Most_of_the_time__c,
                Consumer_Experience_Id__r.Respect_Never__c,
                Consumer_Experience_Id__r.Respect_Some_of_the_time__c,
                Consumer_Experience_Id__r.Safety_Always__c,
                Consumer_Experience_Id__r.Safety_Most_of_the_time__c,
                Consumer_Experience_Id__r.Safety_Never__c,
                Consumer_Experience_Id__r.Safety_Some_of_the_time__c,
                Consumer_Experience_Id__r.Operation_Always__c,
                Consumer_Experience_Id__r.Operation_Most_of_the_time__c,
                Consumer_Experience_Id__r.Operation_Never__c,
                Consumer_Experience_Id__r.Operation_Some_of_the_time__c,
                Consumer_Experience_Id__r.Care_Need_Always__c,
                Consumer_Experience_Id__r.Care_Need_Most_of_the_time__c,
                Consumer_Experience_Id__r.Care_Need_Never__c,
                Consumer_Experience_Id__r.Care_Need_Some_of_the_time__c,
                Consumer_Experience_Id__r.Competent_Always__c,
                Consumer_Experience_Id__r.Competent_Most_of_the_time__c,
                Consumer_Experience_Id__r.Competent_Never__c,
                Consumer_Experience_Id__r.Competent_Some_of_the_time__c,
                Consumer_Experience_Id__r.Independent_Always__c,
                Consumer_Experience_Id__r.Independent_Most_of_the_time__c,
                Consumer_Experience_Id__r.Independent_Never__c,
                Consumer_Experience_Id__r.Independent_Some_of_the_time__c,
                Consumer_Experience_Id__r.Explain_Always__c,
                Consumer_Experience_Id__r.Explain_Most_of_the_time__c,
                Consumer_Experience_Id__r.Explain_Never__c,
                Consumer_Experience_Id__r.Explain_Some_of_the_time__c,
                Consumer_Experience_Id__r.Food_Always__c,
                Consumer_Experience_Id__r.Food_Most_of_the_time__c,
                Consumer_Experience_Id__r.Food_Never__c,
                Consumer_Experience_Id__r.Food_Some_of_the_time__c,
                Consumer_Experience_Id__r.Follow_Up_Always__c,
                Consumer_Experience_Id__r.Follow_Up_Most_of_the_time__c,
                Consumer_Experience_Id__r.Follow_Up_Never__c,
                Consumer_Experience_Id__r.Follow_Up_Some_of_the_time__c,
                Consumer_Experience_Id__r.Caring_Always__c,
                Consumer_Experience_Id__r.Caring_Most_of_the_time__c,
                Consumer_Experience_Id__r.Caring_Never__c,
                Consumer_Experience_Id__r.Caring_Some_of_the_time__c,
                Consumer_Experience_Id__r.Voice_Always__c,
                Consumer_Experience_Id__r.Voice_Most_of_the_time__c,
                Consumer_Experience_Id__r.Voice_Never__c,
                Consumer_Experience_Id__r.Voice_Some_of_the_time__c,
                Consumer_Experience_Id__r.Home_Always__c,
                Consumer_Experience_Id__r.Home_Most_of_the_time__c,
                Consumer_Experience_Id__r.Home_Never__c,
                Consumer_Experience_Id__r.Home_Some_of_the_time__c,
                Service_Compliance_Id__r.Service_Compliance_Rating__c,
                Service_Compliance_Id__r.Rating_Type__c,
                Service_Compliance_Id__r.Rating_Exemption_Reason__c,
                Service_Compliance_Id__r.Rating_Calc_Date__c,
                Service_Compliance_Id__r.Publication_Date__c,
                Service_Compliance_Id__r.SCR_Description__c,
                Quality_Indicator_Id__r.Rating_Type__c,
                Quality_Indicator_Id__r.QI_Rating_Label__c,
                Quality_Indicator_Id__r.Quality_Indicator_Rating__c,
                Quality_Indicator_Id__r.Rating_Exemption_Reason__c,
                Quality_Indicator_Id__r.Rating_Calc_Date__c,
                Quality_Indicator_Id__r.Under_Review__c,
                Quality_Indicator_Id__r.PI_Compare_with_National_Average__c,
                Quality_Indicator_Id__r.PI_Comparison_Outcome_Indicator__c,
                Quality_Indicator_Id__r.Risk_Adjusted_PI_Display__c,
                Quality_Indicator_Id__r.National_Statistic__r.Risk_Adjusted_National_PI__c,
                Quality_Indicator_Id__r.PR_Compare_with_National_Average__c,
                Quality_Indicator_Id__r.PR_Comparison_Outcome_Indicator__c,
                Quality_Indicator_Id__r.QI_Observed_PR_Display__c,
                Quality_Indicator_Id__r.National_Statistic__r.National_percentage_Physical_Restraint__c,
                Quality_Indicator_Id__r.UWL_Compare_with_National_Average__c,
                Quality_Indicator_Id__r.UWL_Comparison_Outcome_Indicator__c,
                Quality_Indicator_Id__r.Risk_Adjusted_SUWL__c,
                Quality_Indicator_Id__r.Risk_Adjusted_SUWL_Display__c,
                Quality_Indicator_Id__r.National_Statistic__r.National_percentage_significant_UWL__c,
                Quality_Indicator_Id__r.FALLS_Compare_with_National_Average__c,
                Quality_Indicator_Id__r.FALLS_Comparison_Outcome_Indicator__c,
                Quality_Indicator_Id__r.Risk_Adjusted_Falls_with_injury_Display__c,
                Quality_Indicator_Id__r.National_Statistic__r.National_percentage_falls__c,
                Quality_Indicator_Id__r.FMI_Compare_with_National_Average__c,
                Quality_Indicator_Id__r.FMI_Comparison_Outcome_Indicator__c,
                Quality_Indicator_Id__r.Risk_Adjusted_FMI_Display__c,
                Quality_Indicator_Id__r.National_Statistic__r.National_Percentage_falls_Major_Injury__c,
                Quality_Indicator_Id__r.Pres_Med_Compare_with_National_Average__c,
                Quality_Indicator_Id__r.Pres_Med_Comparison_Outcome_Indicator__c,
                Quality_Indicator_Id__r.QI_Observed_Polypharmac_Display__c,
                Quality_Indicator_Id__r.National_Statistic__r.National_percentage_Polypharmacy__c,
                Quality_Indicator_Id__r.Antipsy_Compare_with_National_Average__c,
                Quality_Indicator_Id__r.Antipsy_Comparison_Outcome_Indicator__c,
                Quality_Indicator_Id__r.QI_Observed_APSY_Display__c,
                Quality_Indicator_Id__r.National_Statistic__r.National_percentage_APSY__c
            FROM STAR_Rating_History__c
            WHERE SF_Service_Id__c IN :sfServiceIds
            AND (CreatedDate > LAST_N_YEARS:3 OR Go_Live_Date__c > LAST_N_YEARS:3)
            AND Status__c NOT IN ('Removed', 'Draft', NULL)
            ORDER BY CreatedDate
        ];
    }
}